# java实现区块链溯源系统
> 参考项目:https://gitee.com/tianyalei/md_blockchain
##开发目的
> 实现分布式存诸，只有联盟用户对数据库用操作（增删改查）权限
> 联盟共同维护一个区块链
##区块链
> 区块中包含指令,指令其实是对数据库操作
##智能合约
开发特定数据库操作语言（可发送指令）
执行sql
创建表
##共识
pbft 联盟链
#选出主节点

##存诸层
levelDB（区块 lasthash）
角色
公钥（id）
权限列表
状态
详细信息
ca（）
？ 存诸结构，存啥东西
权限
商品（hash,描述（content）,）
交易

##网络传输
t-io p2p网络传输（局域网）
##存在问题
1. 数据库操作权限问题
> 如何让大家认可你的操作（是否对数据库有操作权限）
> 如何确定操作的人是你本人
2. 是否需要修改和删除功能
> 每次操作可溯源，可保证数据可不可修改性
3. p2p 网络问题
> 如何实现各节点相连

##商品流程（交易）
1. 生产
2. 检验
3. 出厂   --> 出现分支（商品与批次分离）
4. 销售
5. 运输
6. 使用
##用户查询商品交易信息（流程）

##开发记录
> 区块链就是将区块链起来保存在sqlite数据库中
通过公钥（数字身份证书）连接服务器获取权限信息 
1.注册当前节点ip（方便广播） 广播有新节点加入

各节点运行
CA（颁发证书）
创建创世块:
>  注册ca，建初始化表
角色注册，填写信息（申请证书->与ca产生交易记录区块指令中）
厂家发布产品（新增数据）-> output 商品ID
厂家送检测 -> 与检查机构产生一次交易
